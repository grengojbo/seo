"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(s){var i="qor.seo",t="enable."+i,e="click."+i,n="blur."+i,o=".qor-seo-tag",u='.qor-seo__settings input[type="text"],.qor-seo__settings textarea[name]:visible';function r(t,e){this.$element=s(t),this.options=s.extend({},r.DEFAULTS,s.isPlainObject(e)&&e),this.focusedInputID="",this.init()}return r.prototype={constructor:r,init:function(){var t=this.$element;this.$addTgas=t.find(o),this.bind()},bind:function(){this.$element.on(e,".qor-seo__defaults-input",this.toggleDefault.bind(this)).on(e,".qor-seo-submit",this.submitSeo.bind(this)).on("click keyup",u,this.tagInputsFocus.bind(this)).on(n,u,this.tagInputsBlur.bind(this)).on(e,o,this.addTags.bind(this))},unbind:function(){this.$element.off(e).off("click keyup").off(n)},toggleDefault:function(){this.$element.find(".qor-seo__settings").toggle()},tagInputsFocus:function(){this.$addTgas.addClass("focus");var t=s(document.activeElement);this.focusedInputID=t.prop("name"),this.focusedInputStart=t[0].selectionStart,this.focusedInputEnd=t[0].selectionEnd,this.focusedInputVal=t.val()},tagInputsBlur:function(){this.$addTgas.removeClass("focus"),this.$focusedInputID=!1},addTags:function(t){if(this.focusedInputID){var e,n=this.focusedInputVal.substring(0,this.focusedInputStart),o=this.focusedInputVal.substring(this.focusedInputEnd,this.focusedInputVal.length);e=n+("{{"+s(t.currentTarget).data("tagValue")+"}}")+o,this.$element.find('[name="'+this.focusedInputID+'"]').val(e).focus(),this.focusedInputID=!1}},submitSeo:function(){var t=this.$element.find(".qor-form");return s(".qor-seo-alert").hide(),s.ajax({method:"POST",url:t.attr("action"),data:new FormData(t[0]),processData:!1,contentType:!1,dataType:"json",success:function(){window.onbeforeunload=null,s.fn.qorSlideoutBeforeHide=null,s(".qor-seo-alert.qor-alert--success").show(),setTimeout(function(){s(".qor-alert--success").hide()},3e3)},error:function(){s(".qor-seo-alert.qor-alert--error").show()}}),!1},destroy:function(){this.unbind(),this.$element.removeData(i)}},r.DEFAULTS={},r.plugin=function(o){return this.each(function(){var t,e=s(this),n=e.data(i);if(!n){if(/destroy/.test(o))return;e.data(i,n=new r(this,o))}"string"==typeof o&&s.isFunction(t=n[o])&&t.apply(n)})},s(function(){var e='[data-toggle="qor.seo"]',n={};s(document).on("click.qor.fixedAlert",'[data-dismiss="fixed-alert"]',function(){s(this).closest(".qor-alert").hide()}).on("disable.qor.seo",function(t){r.plugin.call(s(e,t.target),"destroy")}).on(t,function(t){r.plugin.call(s(e,t.target),n)}).triggerHandler(t)}),r});